<html>
  <head>
    <script
      src="http://www.verovio.org/javascript/latest/verovio-toolkit-wasm.js"
      defer
    ></script>
    <script>
      let meiName =
        "https://raw.githubusercontent.com/trompamusic-encodings/Beethoven_WoOAnh5_BreitkopfHaertel/master/Beethoven_WoOAnh5_Nr1_1-Breitkopf.mei";

      let expansion = 'expansion-minimal';
    //   let expansion = "expansion-default";

      document.addEventListener("DOMContentLoaded", (event) => {
        verovio.module.onRuntimeInitialized = async (_) => {
          let tk = new verovio.toolkit();
          console.log("Verovio has loaded!");

          fetch(meiName)
            .then((response) => response.text())
            .then((meiXML) => {
              tk.loadData(meiXML);

              tk.setOptions({
                scale: 30,
                expand: expansion,
              });

              let timemap = tk.renderToTimemap();
              console.log("Timemap: ", timemap);
              document.getElementById("notation").innerHTML =
                'Timemap expansion="' +
                expansion +
                '" length: ' +
                timemap.length;
            });
        };
      });
    </script>
  </head>
  <body>
    <h1>Hello Verovio!</h1>
    <div id="notation"></div>
  </body>
</html>
